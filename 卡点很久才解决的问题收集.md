
3.安卓对蓝牙传输 有大小限制 超过了会失败 但是不会有任何提示 难感知


样式类
- perf-table cnc-table 继承关系 新旧同时存在导致样式污染 （先访问旧的存在的页面 再访问新的页面 然后在新页面上刷新)
- sass的项目 可能需要Node-sass依赖  还有版本问题
解决方法: 1.tnpm update 2.node v12
  "resolutions": {
    "sass": "1.53.0",
    "node-sass": "7.0.1"
  },

- 如果margin-top: -xxxpx   看不见  那么不是z-index问题 就是外部有 overflow:hidden

基础类
- 如果build start爆栈 有可能是Node版本问题
export NODE_OPTIONS=--max_old_space_size=4096  就不溢出了


iframe类
- 判断无痕模式 js/iframe/no-trace
- iframe 不同域的 内部不是自己的 不要尝试感知iframe内部任何东西  什么都感知不到 操作不到
- iframe 如果内部302了 外部无法用任何办法感知 无法控制

- 判断是否处于iframe
window.self !== window.top
- 获取父页面hostname  
```
  if (window.self !== window.top) {
    try {
      parentUrl = window.top.location.hostname
      // parentUrl = window.parent.location.hostname
    } catch (e) {
      parentUrl = document.referrer
    }
  }
  /**
  问题
  1. 子页面发生了刷新
    window.location.href = '/'  hash路由时最容易发生  '/?key=value#xxx'
    window.location.href = '//baidu.com/
    location.search 改变 也会引起页面刷新
    都会发生引起页面刷新 

    pushState则不会
    window.history.pushState(null, null,'/asadf') 
    window.history.pushState(null, null,'/#asadf') 
    location.href = '/#xxx' 也不会  但是queryString也不会变化 无法通过这个传参
   

    iframe子页面 刷新后 document.referrer 会变化 
    本来指向父页面  刷新后指向自己
    
    iframe子页面除了postmessage无法获取父页面url 所以只能避免刷新了

    pushState切换路由 location.search不更新 获取地址参数方法只能自己写了
  */

```


代理类
- 发生产看不到 别人能看到
1.是不是开了代理
2.是不是dns 配置了host


浏览器类
- https不安全提示 还没按钮
1.原界面输入 thisisunsafe 即可


cone-code 右键新建页面 窗口一直转圈
1.node版本使用v14.18.1
2.cone-cli要全局安装
 tnpm i -g @alife/cone-cli  命令
3.build-scripts里 不允许打开https

npm ci 有办法跳过 postinstall 钩子么？
npm 有个ignore scripts 的参数  

ajax类
application/x-www-form-urlencoded  是原生表单 本质是queryString qs 不是formData
application/formData 才是formData
An HTML <form> can be sent in four ways:

using the POST method and setting the enctype attribute to application/x-www-form-urlencoded (default);
using the POST method and setting the enctype attribute to text/plain;
using the POST method and setting the enctype attribute to multipart/form-data;
using the GET method (in this case the enctype attribute will be ignored).

axios application/x-www-form-urlencoded 
let params = new URLSearchParams()
parans.append('p1', '123')
axios.post(url, params)



next 在新版 macOS 本地开发不了了，
某依赖需要老版本的 node-gyp，进而依赖了 python2，在最新的 macOS 上无法运行

依赖 python 2 这个问题还是要解决的，只要把深层的 node-sass 依赖升级到 6.x/7.x 就能解决问题

mac os 12.3 python 问题
12.3 移除了 python2，/usr/bin/python 不存在，默认的 python 变为 python3
会导致安装一些npm的包依赖时报错，可以通过 pyenv 来安装 python2，并配置环境变量 PATH:
Install pyenv with brew install pyenv 
Install Python 2.7 with pyenv install 2.7.18 and then pyenv global 2.7.18
用 zsh 的这样来设置环境变量PATHecho "export PATH=\"\${HOME}/.pyenv/shims:\${PATH}\"" >> ~/.zshrc



xswitch 正则写法
{
  "proxy": [
    [
      "//(?:dev\\.)?g.alicdn.com/alog-ware/cnop-cone/\\d+\\.\\d+\\.\\d+/(.*)", // https://www.sample.com/path1/path2/index.js
      "//localhost:8802/$1", // http://127.0.0.1:3000/index.js
    ],
  ],
}


react15有个PropTypes React16没有
升了会出问题
解法
  <!-- <script src="//a.alipayobjects.com/g/component/react/15.4.2/react-dom.min.js"></script> -->
  <script src="//gw.alipayobjects.com/os/lib/react/16.14.0/umd/react.production.min.js"></script>
  <script src="//gw.alipayobjects.com/os/lib/react-dom/16.14.0/umd/react-dom.production.min.js"></script>
  <script src="https://g.alicdn.com/code/lib/prop-types/15.7.2/prop-types.min.js"></script>
  <script>
    React.PropTypes = PropTypes
  </script>



  document.createTextNode 创建空白字符 只能用这个16进制
  document.createTextNode('\u00A0\u00A0\u00A0\u00A0')


处理依赖的依赖版本问题
package.json
"resolutions": {
    "sass": "1.53.0",
    "graceful-fs": "^4.2.9" // 这个能直接替换掉fs
}
graceful-fs和node版本不兼容，某些套件（比如@ali/fie-toolkit-ais-multi）里使用了unzip包，unzip依赖的graceful-fs包版本是3.0.x，不兼容node12以上的版本。


批量删除文件
find . -name '*.jpgs' -type f -print -exec rm -rf {} \;
(1) "."    表示从当前目录开始递归查找

(2) “ -name '*.exe' "根据名称来查找，要查找所有以.exe结尾的文件夹或者文件

(3) " -type f "查找的类型为文件

(4) "-print" 输出查找的文件目录名

(5) 最主要的是是-exec了，-exec选项后边跟着一个所要执行的命令，表示将find出来的文件或目录执行该命令。

exec选项后面跟随着所要执行的命令或脚本，然后是一对儿{}，一个空格和一个\，最后是一个分号。



arms
function parseReportPayload(payload) {
  if (payload && payload.gokey) {
    const params = payload.gokey.split('&');
    const paramsObject = params.reduce((result, item) => {
      const data = item.split('=');
      return {
        ...result,
        [data[0]]: decodeURIComponent(decodeURIComponent(data[1])),
      };
    }, {});
    // eslint-disable-next-line no-console
    console.log('arms上报参数对象：', paramsObject);
  }
}



git pull origin xx --rebase. 
用于解决 fatal: Not possible to fast-forward, aborting. 提示报错


host hostname区别
host带端口号




错误的异步示范
export function checkPermission (authCode) {
    if (sessionStorage.pageForButtonAuth) {
        let pageForButtonAuth = {}   
        try {
            pageForButtonAuth = JSON.parse(sessionStorage.pageForButtonAuth);
            return pageForButtonAuth && pageForButtonAuth[authCode]
          } catch (error) {
            console.log('预存数据异常统一返回false',error);
            return false;
          }

    } else {
        setTimeout(() => {
            checkPermission(authCode)     
        }, 100);
    }
}

if (checkPermission('xxx')) {

}

- 上述用例无法实现异步



依赖调试方式
1.npm link   删掉node_modules就解除了 没必要每次都unlink
2.babel  alias 指向目标路径
3.整个项目拖到目标项目


alicdn  combo技巧 合并多个请求 合并文件请求 合并cdn请求

使用 cdn 的 combo 合并多个请求为一个请求
说明：使用 combo 的目的是为了减少请求数，避免页面需要并发加载的请求过多；不过也要避免一个请求 combo 过多文件 造成一个请求的文件过大 而导致单个文件加载时间过长 阻塞页面渲染。combo 的文件体积最好不要大于 500K。
* combo 之前引入库文件的方式（4个链接）
<script src="https://g.alicdn.com/code/lib/lodash.js/4.17.21/lodash.min.js"></script>
<script src="https://g.alicdn.com/dingding/open-develop/1.9.0/dingtalk.js"></script>
<script src="https://g.alicdn.com/dingding/dingtalk-jsapi/2.10.3/dingtalk.open.js"></script>
<script src="https://g.alicdn.com/code/lib/moment.js/2.24.0/moment.min.js"></script>
* combo 之后引入库文件的方式（4个链接合成为1个链接）
<script src="https://g.alicdn.com/??/code/lib/lodash.js/4.17.21/lodash.min.js,/code/lib/moment.js/2.24.0/moment.min.js,dingding/open-develop/1.9.0/dingtalk.js,dingding/dingtalk-jsapi/2.10.3/dingtalk.open.js"></script>


可拖拽布局
react-grid-layout > react-beautiful-dnd > react-dnd 
https://github.com/react-grid-layout/react-grid-layout#demos
https://react-grid-layout.github.io/react-grid-layout/examples/0-showcase.html

同时配合react-sizeme  保证窗口变化改变布局
import { SizeMe } from 'react-sizeme';
```
<SizeMe>
          {({ size }) => (
            <>
              <div className={styles.dashboardMain}>
                <ResponsiveReactGridLayout
                  width={size.width || 0}
                  rowHeight={CARD_ROW_HEIGHT}
                  preventCollision={false}
                  useCSSTransforms={false}
                  isDraggable={isMyself}
                  isResizable={isMyself}
                  measureBeforeMount={false}
                  currentBreakpoint="lg"
                  compactType="vertical"
                  onLayoutChange={methods.changeGridLayout}
                  draggableHandle={`.${styles.gridItemMove}`} // 这是控制可拖拽的class选择器
                  cols={{ lg: 12 }}
                  containerPadding={[0, 0]}
                  margin={[CARD_MARGIN, CARD_MARGIN]}
                  breakpoints={{ lg: 0 }}
                  onDragStart={methods.handleDragStart}
                  onDragEnd={methods.handleDragEnd}
                  onResizeStart={methods.handleResizeStart}
                  onResizeEnd={methods.handleResizeEnd}
                  layouts={{ lg: layouts }}
                >
                  {showingCards.map((item, index) => (
                    <div
                      key={item.id}
                      className={clazz(
                        styles.gridItemContainer,
                        item.id === copyId ? styles.gridItemContainerCopy : null,
                        didDragOrResize ? styles.noUserSelect : null,
                      )}
                    >
                      <div ref={(ref) => methods.calcOffset(ref, item)}>
                        {loadingMApp(index, item)}
                        {isMyself && (
                          <div className={styles.gridItemMove}>
                            <DTIcon type="move" style={{ color: '#666' }} />
                          </div>
                        )}
                      </div>
                    </div>
                  ))}
                </ResponsiveReactGridLayout>
              </div>
            </>
          )}
        </SizeMe>
```

ts window类型声明
src/types/index.d.ts
interface Window {
  menuData: any[];
  _MENU_DATA: {
    homePath: string;
    menuStyleType: string;
    sites: Record<string, any>;
    menus: any;
  };
}


class操作
function hasClass(obj, cls) {
    return obj.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
}
 
function addClass(obj, cls) {
    if (!this.hasClass(obj, cls)) obj.className += " " + cls;
}
 
function removeClass(obj, cls) {
    if (hasClass(obj, cls)) {
        var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
        obj.className = obj.className.replace(reg, ' ');
    }

style操作
// 一次重绘 不会多次重排
export function addStyle(dom, value) {
  for (let styleName in value) {
    dom.style[styleName] = value[styleName];
  }
}


hover菜单 移开鼠标会消失  怎么定住 
用这个方法
setTimeout(() => {
    debugger 
}, 1000)

元素可视
@ice/appear

web excel表格方案
canvas-datagrid
https://canvas-datagrid.js.org/examples/create-new-grid

spreadjs 葡萄城
要钱  给钱给的源码质量很差 但是功能全

​x-spreadsheet 
https://github.com/myliang/x-spreadsheet

Hypergrid
开源免费的在线表格，和canvas-datagrid类似。

https://github.com/fin-hypergrid/core

Luckysheet
开源免费的在线表格，和x-spreadsheet类似。

Luckysheet



vscode 无法搜索目录树
settings -> auto reveal